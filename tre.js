require('dotenv').config();
const {decryptPrivateKey, generateRSAKeyPair, encryptPrivateKey}  = require('./utils/keyModule.js')

async function get() {
    const aesKey = Buffer.from(process.env.AES_MASTER_KEY, 'base64'); // 256-bit AES key
    // config.master;
    console.log('AES Key :', aesKey);

    // const userkey = await generateRSAKeyPair(aesKey);

    // console.log(userkey)

    // const decrypted = await decryptPrivateKey(userkey.encryptedKey, aesKey, userkey.iv);
    // console.log(decrypted)

    const iv = Buffer.from('mKalJSmVJ8J7rLQoHfVtXQ==', 'base64');
    const private = "308204a40201000282010100bafcd60c0a9572d83e6dd5a8495b65c57342a9ac609157ac19cabfd8ab2fd8413bf53dd383d636330bee2ee528589e65eb87bc3d1434b253beec049128ef0029caf8d499636fac43343785e60326c82dc6349cbf826ec624b1160097b4fbf733f279e28fcdbfd62c5592176e9aa6b25f7eb1438914ef594a0a96581f8603e883f4c79dab65dedb2377989220d12c64070ddaadd5a2c6eead27f4f05e7c460dd736d902fde845612a9a9a5fa6390786d6db8e162b6ce08d4d58edaa20768d948afb8a1e953a9466bdef0614c369ddaff845d647e39b5b07c3123bb6a7896f084c0dc8e8aa0d2f7c455470fc70c6fa1346b7226680af7fe92010e45820032f1bd10203010001028201000187b59abdf21467be2c568a95a296d1924085a918d5d9a37fe72e6b2ffcba34362747c24679c4bbb2872865e815404312ac2ba360c3b02da26efc380839018da5ff56f220eef711d0c3a27fe0c8d95239ab8712309129aa58ec93416426c2a2760028820c1e157e4b4e6a5fd8bd5a580a7b137d4a245a9d0214d88baf979251f798614486132d2496fa407e82b2be052eae6bfc35fa2f0a75a625ea764cd3ae80c455659ec148501f9c6b2f56fcf156b867494dc9afc2ebc7921eae0fdbf795f9eae8920a4f4588dabb8f7c1c548014ff5572f6cc3f2db8b8f8b917c9d9beb2c799b8663f98733d0c117b7dd3a60efd860e277b52e555a7fc06bbc1d8f8550102818100fbb8ae55e0db1c5a78deae50a489e88e1f1ff271bafc46cf4f9df27d62d96f0e1f32a7e3f1304e784f3a7c30fa7bc2f113a6873123c82a0541d5fa4150d583b108d11b826818ca7ee544c05874a4464658d7f60c530b62454081b53777c67dcba9d24930aa03179f696ec401e58b4a7f53e234f67f4b7c5331e9a668b20efb0102818100be2a7a676b02b8ec8330bdbb6cc8b5afa61161d1152c3f9a727f8c4509bf97ea4c93bd02e5608bdd4c7862809088c1cc04f1775338b454955615fc6fb224aaa8998dcf9f01dad0d51c4e27417c8998cfa6c9ba609cd200eaa13c3d41c4c0982464832815a0df51dc076edca9be46cb07ea977a6fc26bbcd67966bd5949e430d102818100e6a673c027183ea3bbcb3768974bf2767f98935b98dd5eb8c9184e408c19f643b75c80304229644da33350e6c42e31131b5164e1270b5b4d93e4d0b996aafe4f7267c0d03e38311c13526af8e2704020677a036f898c8dd02cea6d35551fe0d6845636504c0827561f92aa319eb6825da76c47e17204a5f7c96d71d8cf072101028180383e29fba24ba8d3d2ad3cc04d19439b129bbb797230a7130fe0276557cfc1a77b448ab76b8dd56ffb28f3c1207e420b0c3f3a5273c7e9e84d10ad9b7f6d96c7ccba83787cbcf1dcc5c55b98e3b3726d9fdfb3eed512cb5099a54e5cc04b51f419822cfdd0999c055e716c740ba1b674bdee5538eea09cb6362babbed7bad4b102818100ec75f3f34883e1f7b8c3ad5aa63a0028f8d0eb81ed09ddf368d73185ba6f3a2de986aa17155e89330e4154038e82ddd7c161ecbad04072a5a45a3282ac0e3ab92090f048f5e46299f2337e30b5cc5da413fb2b9900c7a2c1ecb14b6a31bca9f4e675f1703862c9a9113f130bd15e90db631430e72ef2524cba988397d98e8285"

    const key = await encryptPrivateKey(private, aesKey, iv);
    console.log('this is key',key)
}

get()